<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta charset="utf-8" />
    <meta name="generator" content="quarto-1.5.56" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=yes"
    />
    <meta name="author" content="Teng Kok Wai (Walter)" />
    <meta name="dcterms.date" content="2024-11-04" />
    <title>
      In-Class Exercise 10 – Walter Teng’s Coursework for SMU ISSS626:
      Geospatial Analytics and Applications
    </title>
    <style>
      code {
        white-space: pre-wrap;
      }
      span.smallcaps {
        font-variant: small-caps;
      }
      div.columns {
        display: flex;
        gap: min(4vw, 1.5em);
      }
      div.column {
        flex: auto;
        overflow-x: auto;
      }
      div.hanging-indent {
        margin-left: 1.5em;
        text-indent: -1.5em;
      }
      ul.task-list {
        list-style: none;
      }
      ul.task-list li input[type="checkbox"] {
        width: 0.8em;
        margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */
        vertical-align: middle;
      }
      /* CSS for syntax highlighting */
      pre > code.sourceCode {
        white-space: pre;
        position: relative;
      }
      pre > code.sourceCode > span {
        line-height: 1.25;
      }
      pre > code.sourceCode > span:empty {
        height: 1.2em;
      }
      .sourceCode {
        overflow: visible;
      }
      code.sourceCode > span {
        color: inherit;
        text-decoration: inherit;
      }
      div.sourceCode {
        margin: 1em 0;
      }
      pre.sourceCode {
        margin: 0;
      }
      @media screen {
        div.sourceCode {
          overflow: auto;
        }
      }
      @media print {
        pre > code.sourceCode {
          white-space: pre-wrap;
        }
        pre > code.sourceCode > span {
          display: inline-block;
          text-indent: -5em;
          padding-left: 5em;
        }
      }
      pre.numberSource code {
        counter-reset: source-line 0;
      }
      pre.numberSource code > span {
        position: relative;
        left: -4em;
        counter-increment: source-line;
      }
      pre.numberSource code > span > a:first-child::before {
        content: counter(source-line);
        position: relative;
        left: -1em;
        text-align: right;
        vertical-align: baseline;
        border: none;
        display: inline-block;
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        padding: 0 4px;
        width: 4em;
      }
      pre.numberSource {
        margin-left: 3em;
        padding-left: 4px;
      }
      div.sourceCode {
      }
      @media screen {
        pre > code.sourceCode > span > a:first-child::before {
          text-decoration: underline;
        }
      }
    </style>

    <script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
    <script src="../../site_libs/quarto-nav/headroom.min.js"></script>
    <script src="../../site_libs/clipboard/clipboard.min.js"></script>
    <script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
    <script src="../../site_libs/quarto-search/fuse.min.js"></script>
    <script src="../../site_libs/quarto-search/quarto-search.js"></script>
    <meta name="quarto:offset" content="../../" />
    <link href="../../favicon.ico" rel="icon" />
    <script src="../../site_libs/quarto-html/quarto.js"></script>
    <script src="../../site_libs/quarto-html/popper.min.js"></script>
    <script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
    <script src="../../site_libs/quarto-html/anchor.min.js"></script>
    <link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet" />
    <link
      href="../../site_libs/quarto-html/quarto-syntax-highlighting.css"
      rel="stylesheet"
      class="quarto-color-scheme"
      id="quarto-text-highlighting-styles"
    />
    <link
      href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css"
      rel="stylesheet"
      class="quarto-color-scheme quarto-color-alternate"
      id="quarto-text-highlighting-styles"
    />
    <script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
    <link
      href="../../site_libs/bootstrap/bootstrap-icons.css"
      rel="stylesheet"
    />
    <link
      href="../../site_libs/bootstrap/bootstrap.min.css"
      rel="stylesheet"
      class="quarto-color-scheme"
      id="quarto-bootstrap"
      data-mode="light"
    />
    <link
      href="../../site_libs/bootstrap/bootstrap-dark.min.css"
      rel="stylesheet"
      class="quarto-color-scheme quarto-color-alternate"
      id="quarto-bootstrap"
      data-mode="dark"
    />
    <link
      href="../../site_libs/quarto-contrib/fontawesome6-0.1.0/all.css"
      rel="stylesheet"
    />
    <link
      href="../../site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css"
      rel="stylesheet"
    />
    <script id="quarto-search-options" type="application/json">
      {
        "location": "navbar",
        "copy-button": false,
        "collapse-after": 3,
        "panel-placement": "end",
        "type": "overlay",
        "limit": 50,
        "keyboard-shortcut": ["f", "/", "s"],
        "show-item-context": false,
        "language": {
          "search-no-results-text": "No results",
          "search-matching-documents-text": "matching documents",
          "search-copy-link-title": "Copy link to search",
          "search-hide-matches-text": "Hide additional matches",
          "search-more-match-text": "more match in this document",
          "search-more-matches-text": "more matches in this document",
          "search-clear-button-title": "Clear",
          "search-text-placeholder": "",
          "search-detached-cancel-button-title": "Cancel",
          "search-submit-button-title": "Submit",
          "search-label": "Search"
        }
      }
    </script>
    <script
      async=""
      src="https://www.googletagmanager.com/gtag/js?id=G-4MGB7PXBSL"
    ></script>
    <script type="text/javascript">
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "G-4MGB7PXBSL", { anonymize_ip: true });
    </script>
    <link rel="stylesheet" href="../../styles.css" />
    <meta
      property="og:title"
      content="In-Class Exercise 10 – Walter Teng’s Coursework for SMU ISSS626: Geospatial Analytics and Applications"
    />
    <meta
      property="og:description"
      content="In this exercise, we will recap on the use of geocoding and learn how to work with Open Government Data."
    />
    <meta
      property="og:image"
      content="https://isss626-gaa.netlify.app/In-class_Ex/In-class_Ex10/og-img.png"
    />
    <meta
      property="og:site_name"
      content="Walter Teng's Coursework for SMU ISSS626: Geospatial Analytics and Applications"
    />
    <meta
      name="twitter:title"
      content="In-Class Exercise 10 – Walter Teng’s Coursework for SMU ISSS626: Geospatial Analytics and Applications"
    />
    <meta
      name="twitter:description"
      content="In this exercise, we will recap on the use of geocoding and learn how to work with Open Government Data."
    />
    <meta
      name="twitter:image"
      content="https://isss626-gaa.netlify.app/In-class_Ex/In-class_Ex10/og-img.png"
    />
    <meta name="twitter:creator" content="@davzoku" />
    <meta name="twitter:site" content="@davzoku" />
    <meta name="twitter:card" content="summary_large_image" />
  </head>
  <body class="nav-fixed">
    <div id="quarto-search-results"></div>
    <header id="quarto-header" class="headroom fixed-top">
      <nav class="navbar navbar-expand-lg" data-bs-theme="dark">
        <div class="navbar-container container-fluid">
          <div class="navbar-brand-container mx-auto">
            <a class="navbar-brand" href="../../index.html">
              <span class="navbar-title"
                >ISSS626 Geospatial Analytics and Applications</span
              >
            </a>
          </div>
          <div id="quarto-search" class="" title="Search"></div>
          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarCollapse"
            aria-controls="navbarCollapse"
            role="menu"
            aria-expanded="false"
            aria-label="Toggle navigation"
            onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
              <li class="nav-item dropdown">
                <a
                  class="nav-link dropdown-toggle"
                  href="#"
                  id="nav-menu-hands-on-exercises"
                  role="link"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                >
                  <span class="menu-text">Hands-on Exercises</span>
                </a>
                <ul
                  class="dropdown-menu"
                  aria-labelledby="nav-menu-hands-on-exercises"
                >
                  <li>
                    <a
                      class="dropdown-item"
                      href="../../Hands-on_Ex/Hands-on_Ex01/Hands-on_Ex01a.html"
                    >
                      <span class="dropdown-text"
                        >1A: Geospatial Data Wrangling with R</span
                      ></a
                    >
                  </li>
                  <li>
                    <a
                      class="dropdown-item"
                      href="../../Hands-on_Ex/Hands-on_Ex01/Hands-on_Ex01b.html"
                    >
                      <span class="dropdown-text"
                        >1B: Choropleth Mapping with R</span
                      ></a
                    >
                  </li>
                  <li>
                    <a
                      class="dropdown-item"
                      href="../../Hands-on_Ex/Hands-on_Ex02/Hands-on_Ex02a.html"
                    >
                      <span class="dropdown-text"
                        >2A: 1st Order Spatial Point Patterns Analysis</span
                      ></a
                    >
                  </li>
                  <li>
                    <a
                      class="dropdown-item"
                      href="../../Hands-on_Ex/Hands-on_Ex02/Hands-on_Ex02b.html"
                    >
                      <span class="dropdown-text"
                        >2B: 2nd Order Spatial Point Patterns Analysis</span
                      ></a
                    >
                  </li>
                  <li>
                    <a
                      class="dropdown-item"
                      href="../../Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03a.html"
                    >
                      <span class="dropdown-text"
                        >3A: Network Constrained Spatial Point Patterns
                        Analysis</span
                      ></a
                    >
                  </li>
                  <li>
                    <a
                      class="dropdown-item"
                      href="../../Hands-on_Ex/Hands-on_Ex04/Hands-on_Ex04a.html"
                    >
                      <span class="dropdown-text"
                        >4A: Spatial Weights and Applications</span
                      ></a
                    >
                  </li>
                  <li>
                    <a
                      class="dropdown-item"
                      href="../../Hands-on_Ex/Hands-on_Ex05/Hands-on_Ex05a.html"
                    >
                      <span class="dropdown-text"
                        >5A: Global Measures of Spatial Autocorrelation</span
                      ></a
                    >
                  </li>
                  <li>
                    <a
                      class="dropdown-item"
                      href="../../Hands-on_Ex/Hands-on_Ex05/Hands-on_Ex05b.html"
                    >
                      <span class="dropdown-text"
                        >5B: Local Measures of Spatial Autocorrelation</span
                      ></a
                    >
                  </li>
                  <li>
                    <a
                      class="dropdown-item"
                      href="../../Hands-on_Ex/Hands-on_Ex06/Hands-on_Ex06a.html"
                    >
                      <span class="dropdown-text"
                        >6A: Geographical Segmentation with Spatially
                        Constrained Clustering Techniques</span
                      ></a
                    >
                  </li>
                  <li>
                    <a
                      class="dropdown-item"
                      href="../../Hands-on_Ex/Hands-on_Ex07/Hands-on_Ex07a.html"
                    >
                      <span class="dropdown-text"
                        >7A: Calibrating Hedonic Pricing Model for Private
                        Highrise Property with GWR Method</span
                      ></a
                    >
                  </li>
                  <li>
                    <a
                      class="dropdown-item"
                      href="../../Hands-on_Ex/Hands-on_Ex08/Hands-on_Ex08a.html"
                    >
                      <span class="dropdown-text"
                        >8A: Geographically Weighted Predictive Models</span
                      ></a
                    >
                  </li>
                  <li>
                    <a
                      class="dropdown-item"
                      href="../../Hands-on_Ex/Hands-on_Ex09/Hands-on_Ex09a.html"
                    >
                      <span class="dropdown-text"
                        >9A: Modelling Geographical Accessibility</span
                      ></a
                    >
                  </li>
                  <li>
                    <a
                      class="dropdown-item"
                      href="../../Hands-on_Ex/Hands-on_Ex10/Hands-on_Ex10a.html"
                    >
                      <span class="dropdown-text"
                        >10A: Processing and Visualising Flow Data</span
                      ></a
                    >
                  </li>
                  <li>
                    <a
                      class="dropdown-item"
                      href="../../Hands-on_Ex/Hands-on_Ex10/Hands-on_Ex10b.html"
                    >
                      <span class="dropdown-text"
                        >10B: Calibrating Spatial Interaction Models with
                        R</span
                      ></a
                    >
                  </li>
                </ul>
              </li>
              <li class="nav-item dropdown">
                <a
                  class="nav-link dropdown-toggle"
                  href="#"
                  id="nav-menu-in-class-exercises"
                  role="link"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                >
                  <span class="menu-text">In-class Exercises</span>
                </a>
                <ul
                  class="dropdown-menu"
                  aria-labelledby="nav-menu-in-class-exercises"
                >
                  <li>
                    <a
                      class="dropdown-item"
                      href="../../In-class_Ex/In-class_Ex01/In-class_Ex01.html"
                    >
                      <span class="dropdown-text">In-class Exercise 01</span></a
                    >
                  </li>
                  <li>
                    <a
                      class="dropdown-item"
                      href="../../In-class_Ex/In-class_Ex02/In-class_Ex02.html"
                    >
                      <span class="dropdown-text">In-class Exercise 02</span></a
                    >
                  </li>
                  <li>
                    <a
                      class="dropdown-item"
                      href="../../In-class_Ex/In-class_Ex03/In-class_Ex03.html"
                    >
                      <span class="dropdown-text">In-class Exercise 03</span></a
                    >
                  </li>
                  <li>
                    <a
                      class="dropdown-item"
                      href="../../In-class_Ex/In-class_Ex04/In-class_Ex04.html"
                    >
                      <span class="dropdown-text">In-class Exercise 04</span></a
                    >
                  </li>
                  <li>
                    <a
                      class="dropdown-item"
                      href="../../In-class_Ex/In-class_Ex05/In-class_Ex05.html"
                    >
                      <span class="dropdown-text">In-class Exercise 05</span></a
                    >
                  </li>
                  <li>
                    <a
                      class="dropdown-item"
                      href="../../In-class_Ex/In-class_Ex06/In-class_Ex06.html"
                    >
                      <span class="dropdown-text">In-class Exercise 06</span></a
                    >
                  </li>
                  <li>
                    <a
                      class="dropdown-item"
                      href="../../In-class_Ex/In-class_Ex07/In-class_Ex07.html"
                    >
                      <span class="dropdown-text">In-class Exercise 07</span></a
                    >
                  </li>
                  <li>
                    <a
                      class="dropdown-item"
                      href="../../In-class_Ex/In-class_Ex08/In-class_Ex08.html"
                    >
                      <span class="dropdown-text">In-class Exercise 08</span></a
                    >
                  </li>
                  <li>
                    <a
                      class="dropdown-item"
                      href="../../In-class_Ex/In-class_Ex09/In-class_Ex09.html"
                    >
                      <span class="dropdown-text">In-class Exercise 09</span></a
                    >
                  </li>
                  <li>
                    <a
                      class="dropdown-item"
                      href="../../In-class_Ex/In-class_Ex10/In-class_Ex10.html"
                    >
                      <span class="dropdown-text">In-class Exercise 10</span></a
                    >
                  </li>
                </ul>
              </li>
              <li class="nav-item dropdown">
                <a
                  class="nav-link dropdown-toggle"
                  href="#"
                  id="nav-menu-take-home-exercises"
                  role="link"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                >
                  <span class="menu-text">Take-home Exercises</span>
                </a>
                <ul
                  class="dropdown-menu"
                  aria-labelledby="nav-menu-take-home-exercises"
                >
                  <li>
                    <a
                      class="dropdown-item"
                      href="../../Take-home_Ex/Take-home_Ex01/Take-home_Ex01.html"
                    >
                      <span class="dropdown-text"
                        >Take-home Exercise 01</span
                      ></a
                    >
                  </li>
                  <li>
                    <a
                      class="dropdown-item"
                      href="../../Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html"
                    >
                      <span class="dropdown-text"
                        >Take-home Exercise 02</span
                      ></a
                    >
                  </li>
                  <li>
                    <a
                      class="dropdown-item"
                      href="../../Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html"
                    >
                      <span class="dropdown-text"
                        >Take-home Exercise 03</span
                      ></a
                    >
                  </li>
                </ul>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="../../Exploration/index.html">
                  <span class="menu-text">Exploration</span></a
                >
              </li>
            </ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
              <li class="nav-item">
                <a class="nav-link" href="../../index.html">
                  <span class="menu-text"
                    ><i
                      class="fa-solid fa-house fa-md"
                      aria-label="house"
                    ></i></span
                ></a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="https://www.walterteng.com">
                  <span class="menu-text"
                    ><i
                      class="fa-solid fa-user fa-md"
                      aria-label="user"
                    ></i></span
                ></a>
              </li>
              <li class="nav-item compact">
                <a
                  class="nav-link"
                  href="https://www.linkedin.com/in/tengkokwai/"
                >
                  <i class="bi bi-linkedin" role="img"> </i>
                  <span class="menu-text"></span
                ></a>
              </li>
              <li class="nav-item compact">
                <a
                  class="nav-link"
                  href="https://github.com/davzoku/isss626-gaa"
                >
                  <i class="bi bi-github" role="img"> </i>
                  <span class="menu-text"></span
                ></a>
              </li>
            </ul>
          </div>
          <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
            <a
              href=""
              class="quarto-color-scheme-toggle quarto-navigation-tool px-1"
              onclick="window.quartoToggleColorScheme(); return false;"
              title="Toggle dark mode"
              ><i class="bi"></i
            ></a>
          </div>
        </div>
        <!-- /container-fluid -->
      </nav>
    </header>
    <!-- content -->
    <div
      id="quarto-content"
      class="quarto-container page-columns page-rows-contents page-layout-article page-navbar"
    >
      <!-- sidebar -->
      <!-- margin-sidebar -->
      <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
          <h2 id="toc-title">On this page</h2>

          <ul>
            <li>
              <a
                href="#exercise-reference"
                id="toc-exercise-reference"
                class="nav-link active"
                data-scroll-target="#exercise-reference"
                ><span class="header-section-number">1</span> Exercise
                Reference</a
              >
            </li>
            <li>
              <a
                href="#learning-outcome"
                id="toc-learning-outcome"
                class="nav-link"
                data-scroll-target="#learning-outcome"
                ><span class="header-section-number">2</span> Learning
                Outcome</a
              >
            </li>
            <li>
              <a
                href="#import-the-r-packages"
                id="toc-import-the-r-packages"
                class="nav-link"
                data-scroll-target="#import-the-r-packages"
                ><span class="header-section-number">3</span> Import the R
                Packages</a
              >
            </li>
            <li>
              <a
                href="#geocoding"
                id="toc-geocoding"
                class="nav-link"
                data-scroll-target="#geocoding"
                ><span class="header-section-number">4</span> Geocoding</a
              >
            </li>
          </ul>
        </nav>
      </div>
      <!-- main -->
      <main class="content" id="quarto-document-content">
        <header id="title-block-header" class="quarto-title-block default">
          <div class="quarto-title">
            <h1 class="title">In-Class Exercise 10</h1>
            <p class="subtitle lead">
              In this exercise, we will recap on the use of geocoding and learn
              how to work with Open Government Data.
            </p>
          </div>

          <div class="quarto-title-meta">
            <div>
              <div class="quarto-title-meta-heading">Author</div>
              <div class="quarto-title-meta-contents">
                <p>Teng Kok Wai (Walter)</p>
              </div>
            </div>

            <div>
              <div class="quarto-title-meta-heading">Published</div>
              <div class="quarto-title-meta-contents">
                <p class="date">November 4, 2024</p>
              </div>
            </div>

            <div>
              <div class="quarto-title-meta-heading">Modified</div>
              <div class="quarto-title-meta-contents">
                <p class="date-modified">November 8, 2024</p>
              </div>
            </div>
          </div>
        </header>
        <section id="exercise-reference" class="level2" data-number="1">
          <h2
            data-number="1"
            class="anchored"
            data-anchor-id="exercise-reference"
          >
            <span class="header-section-number">1</span> Exercise Reference
          </h2>
          <ul>
            <li>
              <a
                href="https://isss626-ay2024-25aug.netlify.app/in-class_ex/in-class_ex10/in-class_ex10#/title-slide"
                >ISSS626 Geospatial Analytics and Applications – In-class
                Exercise 10: Working with Open Government Data</a
              >
            </li>
          </ul>
        </section>
        <section id="learning-outcome" class="level2" data-number="2">
          <h2
            data-number="2"
            class="anchored"
            data-anchor-id="learning-outcome"
          >
            <span class="header-section-number">2</span> Learning Outcome
          </h2>
          <p>
            In this exercise, we will recap on the use of geocoding and learn
            how to work with Open Government Data.
          </p>
        </section>
        <section id="import-the-r-packages" class="level2" data-number="3">
          <h2
            data-number="3"
            class="anchored"
            data-anchor-id="import-the-r-packages"
          >
            <span class="header-section-number">3</span> Import the R Packages
          </h2>
          <div class="cell">
            <div class="sourceCode" id="cb1">
              <pre
                class="downlit sourceCode r code-with-copy"
              ><code class="sourceCode R"><span><span class="fu">pacman</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span><span class="op">(</span><span class="va">tidyverse</span>, <span class="va">sf</span>, <span class="va">tmap</span>, <span class="va">httr</span>, <span class="va">performance</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre>
            </div>
          </div>
        </section>
        <section id="geocoding" class="level2" data-number="4">
          <h2 data-number="4" class="anchored" data-anchor-id="geocoding">
            <span class="header-section-number">4</span> Geocoding
          </h2>
          <p>
            The HDB resale data can be downloaded from
            <a
              href="https://data.gov.sg/datasets?query=resale&amp;page=1&amp;resultId=d_8b84c4ee58e3cfc0ece0d773c8ca6abc"
              >here</a
            >. The dataset contains resale flat prices based on registration
            date from Jan 2017 to Sep 2024.
          </p>
          <p>
            The code below reads the raw CSV file containing the resale flat
            data and filters it to include only records from January 2023 to
            September 2024.
          </p>
          <div class="cell">
            <div class="sourceCode" id="cb2">
              <pre
                class="downlit sourceCode r code-with-copy"
              ><code class="sourceCode R"><span><span class="va">resale</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">"data/raw_data/resale.csv"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">month</span> <span class="op">&gt;=</span> <span class="st">"2023-01"</span> <span class="op">&amp;</span> <span class="va">month</span> <span class="op">&lt;=</span> <span class="st">"2024-09"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre>
            </div>
          </div>
          <p>
            The following code tidies the data by creating new columns: -
            <code>address</code>: Combines <code>block</code> and
            <code>street_name</code> to form a complete address. -
            <code>remaining_lease_yr</code>: Extracts the remaining lease years
            as an integer. - <code>remaining_lease_mth</code>: Extracts the
            remaining lease months as an integer.
          </p>
          <div class="cell">
            <div class="sourceCode" id="cb3">
              <pre
                class="downlit sourceCode r code-with-copy"
              ><code class="sourceCode R"><span><span class="va">resale_tidy</span> <span class="op">&lt;-</span> <span class="va">resale</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>address <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">block</span>,<span class="va">street_name</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>remaining_lease_yr <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html">as.integer</a></span><span class="op">(</span></span>
<span>    <span class="fu">str_sub</span><span class="op">(</span><span class="va">remaining_lease</span>, <span class="fl">0</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>remaining_lease_mth <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html">as.integer</a></span><span class="op">(</span></span>
<span>    <span class="fu">str_sub</span><span class="op">(</span><span class="va">remaining_lease</span>, <span class="fl">9</span>, <span class="fl">11</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre>
            </div>
          </div>
          <p>
            Next, we filter the tidy dataset to include only records from
            September 2024 and take the first 10 addresses as an example.
          </p>
          <div class="cell">
            <div class="sourceCode" id="cb4">
              <pre
                class="downlit sourceCode r code-with-copy"
              ><code class="sourceCode R"><span><span class="va">resale_selected</span> <span class="op">&lt;-</span> <span class="va">resale_tidy</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">month</span> <span class="op">==</span> <span class="st">"2024-09"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">first_10_resale</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">resale_selected</span>, <span class="fl">10</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre>
            </div>
          </div>
          <p>
            Then, we generate a sorted list of unique addresses from the
            filtered dataset. This will be used to retrieve geographical
            coordinates.
          </p>
          <div class="cell">
            <div class="sourceCode" id="cb5">
              <pre
                class="downlit sourceCode r code-with-copy"
              ><code class="sourceCode R"><span><span class="va">add_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sort.html">sort</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="va">first_10_resale</span><span class="op">$</span><span class="va">address</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">add_list</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre>
            </div>
            <div class="cell-output cell-output-stdout">
              <pre><code>[1] "174 ANG MO KIO AVE 4"  "223 ANG MO KIO AVE 1"  "225 ANG MO KIO AVE 1"
[4] "308A ANG MO KIO AVE 1" "308B ANG MO KIO AVE 1" "314 ANG MO KIO AVE 3"
[7] "320 ANG MO KIO AVE 1"  "321 ANG MO KIO AVE 1"  "331 ANG MO KIO AVE 1" </code></pre>
            </div>
          </div>
          <p>
            In the code below, we will perform geocoding and save the output
            into 2 data frames, <code>found</code> and <code>not_found</code>.
          </p>
          <p>
            <code>found</code> data frames contains data from successful API
            calls and <code>not_found</code> contains data with api errors etc.
            These data require additional care and manual geocoding may be
            required.
          </p>
          <div class="cell">
            <div class="sourceCode" id="cb7">
              <pre
                class="downlit sourceCode r code-with-copy"
              ><code class="sourceCode R"><span><span class="va">url</span> <span class="op">&lt;-</span> <span class="st">"https://onemap.gov.sg/api/common/elastic/search"</span></span>
<span><span class="va">found</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">not_found</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">address</span> <span class="kw">in</span> <span class="va">add_list</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="va">query</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">'searchVal'</span><span class="op">=</span><span class="va">address</span>, <span class="st">'returnGeom'</span><span class="op">=</span><span class="st">'Y'</span>, </span>
<span>                <span class="st">'getAddrDetails'</span><span class="op">=</span><span class="st">'Y'</span>, <span class="st">'pageNum'</span><span class="op">=</span><span class="st">'1'</span><span class="op">)</span></span>
<span>  <span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">GET</span><span class="op">(</span><span class="va">url</span>, query<span class="op">=</span><span class="va">query</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="op">(</span><span class="fu">content</span><span class="op">(</span><span class="va">res</span><span class="op">)</span><span class="op">$</span><span class="va">found</span><span class="op">)</span><span class="op">!=</span><span class="fl">0</span><span class="op">)</span><span class="op">{</span></span>
<span>    <span class="va">tmp_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="fu">content</span><span class="op">(</span><span class="va">res</span><span class="op">)</span><span class="op">)</span><span class="op">[</span><span class="fl">4</span><span class="op">:</span><span class="fl">13</span><span class="op">]</span></span>
<span>    <span class="va">tmp_df</span><span class="op">$</span><span class="va">address</span><span class="op">&lt;-</span> <span class="va">address</span></span>
<span>    <span class="va">found</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="va">found</span>, <span class="va">tmp_df</span><span class="op">)</span></span>
<span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>    <span class="va">not_found</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="va">not_found</span>, <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>address <span class="op">=</span> <span class="va">address</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span>  </span>
<span><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre>
            </div>
          </div>
          <div class="cell">
            <div class="sourceCode" id="cb8">
              <pre
                class="downlit sourceCode r code-with-copy"
              ><code class="sourceCode R"><span><span class="va">found</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre>
            </div>
            <div class="cell-output cell-output-stdout">
              <pre><code>                         results.SEARCHVAL results.BLK_NO   results.ROAD_NAME
1                        KEBUN BARU LINK 1            174 ANG MO KIO AVENUE 4
2 223 ANG MO KIO AVENUE 1 SINGAPORE 560223            223 ANG MO KIO AVENUE 1
3 225 ANG MO KIO AVENUE 1 SINGAPORE 560225            225 ANG MO KIO AVENUE 1
4                          TECK GHEE VISTA           308A ANG MO KIO AVENUE 1
5                          TECK GHEE VISTA           308B ANG MO KIO AVENUE 1
6                      TECK GHEE EVERGREEN            314 ANG MO KIO AVENUE 3
7     STAR LEARNERS @ ANG MO KIO PTE. LTD.            320 ANG MO KIO AVENUE 1
8      NEIGHBOURHOOD POLICE POST TECK GHEE            321 ANG MO KIO AVENUE 1
9                           MY FIRST SKOOL            331 ANG MO KIO AVENUE 1
                      results.BUILDING
1                    KEBUN BARU LINK 1
2                                  NIL
3                                  NIL
4                      TECK GHEE VISTA
5                      TECK GHEE VISTA
6                  TECK GHEE EVERGREEN
7 STAR LEARNERS @ ANG MO KIO PTE. LTD.
8  NEIGHBOURHOOD POLICE POST TECK GHEE
9                       MY FIRST SKOOL
                                                                results.ADDRESS
1                    174 ANG MO KIO AVENUE 4 KEBUN BARU LINK 1 SINGAPORE 560174
2                                      223 ANG MO KIO AVENUE 1 SINGAPORE 560223
3                                      225 ANG MO KIO AVENUE 1 SINGAPORE 560225
4                     308A ANG MO KIO AVENUE 1 TECK GHEE VISTA SINGAPORE 561308
5                     308B ANG MO KIO AVENUE 1 TECK GHEE VISTA SINGAPORE 562308
6                  314 ANG MO KIO AVENUE 3 TECK GHEE EVERGREEN SINGAPORE 560314
7 320 ANG MO KIO AVENUE 1 STAR LEARNERS @ ANG MO KIO PTE. LTD. SINGAPORE 560320
8  321 ANG MO KIO AVENUE 1 NEIGHBOURHOOD POLICE POST TECK GHEE SINGAPORE 560321
9                       331 ANG MO KIO AVENUE 1 MY FIRST SKOOL SINGAPORE 560331
  results.POSTAL        results.X        results.Y results.LATITUDE
1         560174 28478.5794445509 39676.8076131288 1.37509746867904
2         560223 28534.6432265872 38676.1728609148 1.36604808445916
3         560225  28537.680043661 38825.2326317504 1.36739612776859
4         561308 29198.1455183588 38613.7381223254 1.36548342757106
5         562308 29248.5946499519 38589.7120627463  1.3652661423815
6         560314 29865.9980458226 38695.9702712912 1.36622707120636
7         560320  29676.907292584 38625.7954039071 1.36559244608528
8         560321 29712.2350843353 38575.9067748357 1.36514126911853
9         560331 29941.7457938343 38240.8809963278 1.36211140145298
  results.LONGITUDE               address
1   103.83761896123  174 ANG MO KIO AVE 4
2  103.838122716883  223 ANG MO KIO AVE 1
3  103.838150007464  225 ANG MO KIO AVE 1
4  103.844084739929 308A ANG MO KIO AVE 1
5  103.844538059044 308B ANG MO KIO AVE 1
6  103.850085858983  314 ANG MO KIO AVE 3
7  103.848386744168  320 ANG MO KIO AVE 1
8    103.8487041858  321 ANG MO KIO AVE 1
9   103.85076647513  331 ANG MO KIO AVE 1</code></pre>
            </div>
          </div>
          <div class="cell">
            <div class="sourceCode" id="cb10">
              <pre
                class="downlit sourceCode r code-with-copy"
              ><code class="sourceCode R"><span><span class="va">not_found</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre>
            </div>
            <div class="cell-output cell-output-stdout">
              <pre><code>data frame with 0 columns and 0 rows</code></pre>
            </div>
          </div>
          <p>
            In this example, we get all successful calls and 0 failures when
            performing geocoding.
          </p>
          <p>Next, we tidy the field names.</p>
          <div class="cell">
            <div class="sourceCode" id="cb12">
              <pre
                class="downlit sourceCode r code-with-copy"
              ><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">found</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre>
            </div>
            <div class="cell-output cell-output-stdout">
              <pre><code> [1] "results.SEARCHVAL" "results.BLK_NO"    "results.ROAD_NAME"
 [4] "results.BUILDING"  "results.ADDRESS"   "results.POSTAL"
 [7] "results.X"         "results.Y"         "results.LATITUDE"
[10] "results.LONGITUDE" "address"          </code></pre>
            </div>
          </div>
          <div class="cell">
            <div class="sourceCode" id="cb14">
              <pre
                class="downlit sourceCode r code-with-copy"
              ><code class="sourceCode R"><span><span class="va">found_filtered</span> <span class="op">&lt;-</span> <span class="va">found</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">results.BLK_NO</span>, <span class="va">results.ROAD_NAME</span>, <span class="va">results.POSTAL</span>, <span class="va">results.X</span>, <span class="va">results.Y</span>, <span class="va">address</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">rename</span><span class="op">(</span></span>
<span>    POSTAL <span class="op">=</span> <span class="va">results.POSTAL</span>,</span>
<span>    XCOORD <span class="op">=</span> <span class="va">results.X</span>,</span>
<span>    YCOORD <span class="op">=</span> <span class="va">results.Y</span>,</span>
<span>    BLK_NO <span class="op">=</span> <span class="va">results.BLK_NO</span>,</span>
<span>    ROAD_NAME <span class="op">=</span> <span class="va">results.ROAD_NAME</span></span>
<span>  <span class="op">)</span></span>
<span><span class="va">found_filtered</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre>
            </div>
            <div class="cell-output cell-output-stdout">
              <pre><code>  BLK_NO           ROAD_NAME POSTAL           XCOORD           YCOORD
1    174 ANG MO KIO AVENUE 4 560174 28478.5794445509 39676.8076131288
2    223 ANG MO KIO AVENUE 1 560223 28534.6432265872 38676.1728609148
3    225 ANG MO KIO AVENUE 1 560225  28537.680043661 38825.2326317504
4   308A ANG MO KIO AVENUE 1 561308 29198.1455183588 38613.7381223254
5   308B ANG MO KIO AVENUE 1 562308 29248.5946499519 38589.7120627463
6    314 ANG MO KIO AVENUE 3 560314 29865.9980458226 38695.9702712912
7    320 ANG MO KIO AVENUE 1 560320  29676.907292584 38625.7954039071
8    321 ANG MO KIO AVENUE 1 560321 29712.2350843353 38575.9067748357
9    331 ANG MO KIO AVENUE 1 560331 29941.7457938343 38240.8809963278
                address
1  174 ANG MO KIO AVE 4
2  223 ANG MO KIO AVE 1
3  225 ANG MO KIO AVE 1
4 308A ANG MO KIO AVE 1
5 308B ANG MO KIO AVE 1
6  314 ANG MO KIO AVE 3
7  320 ANG MO KIO AVE 1
8  321 ANG MO KIO AVE 1
9  331 ANG MO KIO AVE 1</code></pre>
            </div>
          </div>
          <p>
            Next, we join <code>resale</code> with <code>found</code> to form
            <code>resale_geocoded</code>. Then we convert this tibble dataframe
            to sf point feature data frame.
          </p>
          <div class="cell">
            <div class="sourceCode" id="cb16">
              <pre
                class="downlit sourceCode r code-with-copy"
              ><code class="sourceCode R"><span><span class="co"># we need to add an address column for joining</span></span>
<span><span class="va">first_10_resale</span> <span class="op">&lt;-</span> <span class="va">first_10_resale</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>address <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">block</span>, <span class="va">street_name</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre>
            </div>
          </div>
          <div class="cell">
            <div class="sourceCode" id="cb17">
              <pre
                class="downlit sourceCode r code-with-copy"
              ><code class="sourceCode R"><span><span class="va">resale_geocoded</span> <span class="op">=</span> <span class="fu">left_join</span><span class="op">(</span></span>
<span>  <span class="va">first_10_resale</span>, <span class="va">found_filtered</span>, </span>
<span>  by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'address'</span> <span class="op">=</span> <span class="st">'address'</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">resale_geocoded</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre>
            </div>
            <div class="cell-output cell-output-stdout">
              <pre><code># A tibble: 10 × 19
   month   town       flat_type block street_name    storey_range floor_area_sqm
   &lt;chr&gt;   &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;          &lt;chr&gt;                 &lt;dbl&gt;
 1 2024-09 ANG MO KIO 2 ROOM    314   ANG MO KIO AV… 01 TO 03                 44
 2 2024-09 ANG MO KIO 2 ROOM    174   ANG MO KIO AV… 10 TO 12                 45
 3 2024-09 ANG MO KIO 2 ROOM    174   ANG MO KIO AV… 04 TO 06                 45
 4 2024-09 ANG MO KIO 3 ROOM    223   ANG MO KIO AV… 10 TO 12                 82
 5 2024-09 ANG MO KIO 3 ROOM    320   ANG MO KIO AV… 04 TO 06                 73
 6 2024-09 ANG MO KIO 3 ROOM    331   ANG MO KIO AV… 01 TO 03                 68
 7 2024-09 ANG MO KIO 3 ROOM    308A  ANG MO KIO AV… 16 TO 18                 70
 8 2024-09 ANG MO KIO 3 ROOM    321   ANG MO KIO AV… 07 TO 09                 88
 9 2024-09 ANG MO KIO 3 ROOM    308B  ANG MO KIO AV… 22 TO 24                 70
10 2024-09 ANG MO KIO 3 ROOM    225   ANG MO KIO AV… 01 TO 03                 67
# ℹ 12 more variables: flat_model &lt;chr&gt;, lease_commence_date &lt;dbl&gt;,
#   remaining_lease &lt;chr&gt;, resale_price &lt;dbl&gt;, address &lt;chr&gt;,
#   remaining_lease_yr &lt;int&gt;, remaining_lease_mth &lt;int&gt;, BLK_NO &lt;chr&gt;,
#   ROAD_NAME &lt;chr&gt;, POSTAL &lt;chr&gt;, XCOORD &lt;chr&gt;, YCOORD &lt;chr&gt;</code></pre>
            </div>
          </div>
          <p>To convert to sf:</p>
          <div class="cell">
            <div class="sourceCode" id="cb19">
              <pre
                class="downlit sourceCode r code-with-copy"
              ><code class="sourceCode R"><span><span class="va">resale_geocoded_sf</span> <span class="op">&lt;-</span> <span class="fu">st_as_sf</span><span class="op">(</span><span class="va">resale_geocoded</span>, </span>
<span>                            coords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"XCOORD"</span>,</span>
<span>                                       <span class="st">"YCOORD"</span><span class="op">)</span>,</span>
<span>                            crs<span class="op">=</span><span class="fl">3414</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre>
            </div>
          </div>
          <p>Next we check for overlapping point features.</p>
          <div class="cell">
            <div class="sourceCode" id="cb20">
              <pre
                class="downlit sourceCode r code-with-copy"
              ><code class="sourceCode R"><span><span class="va">overlapping_points</span> <span class="op">&lt;-</span> <span class="va">resale_geocoded_sf</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>overlap <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/lengths.html">lengths</a></span><span class="op">(</span><span class="fu">st_equals</span><span class="op">(</span><span class="va">.</span>, <span class="va">.</span><span class="op">)</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">1</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre>
            </div>
          </div>
          <p>
            In the code below, <code>st_jitter()</code> of sf package is used to
            move the point features by 5m to avoid overlapping point features.
          </p>
          <div class="cell">
            <div class="sourceCode" id="cb21">
              <pre
                class="downlit sourceCode r code-with-copy"
              ><code class="sourceCode R"><span><span class="va">resale_geocoded_sf</span> <span class="op">&lt;-</span> <span class="va">resale_geocoded_sf</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">st_jitter</span><span class="op">(</span>amount <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span>
<span></span>
<span><span class="va">resale_geocoded_sf</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre>
            </div>
            <div class="cell-output cell-output-stdout">
              <pre><code>Simple feature collection with 10 features and 17 fields
Geometry type: POINT
Dimension:     XY
Bounding box:  xmin: 28475.59 ymin: 38239.9 xmax: 29942.83 ymax: 39681.36
Projected CRS: SVY21 / Singapore TM
# A tibble: 10 × 18
   month   town       flat_type block street_name    storey_range floor_area_sqm
 * &lt;chr&gt;   &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;          &lt;chr&gt;                 &lt;dbl&gt;
 1 2024-09 ANG MO KIO 2 ROOM    314   ANG MO KIO AV… 01 TO 03                 44
 2 2024-09 ANG MO KIO 2 ROOM    174   ANG MO KIO AV… 10 TO 12                 45
 3 2024-09 ANG MO KIO 2 ROOM    174   ANG MO KIO AV… 04 TO 06                 45
 4 2024-09 ANG MO KIO 3 ROOM    223   ANG MO KIO AV… 10 TO 12                 82
 5 2024-09 ANG MO KIO 3 ROOM    320   ANG MO KIO AV… 04 TO 06                 73
 6 2024-09 ANG MO KIO 3 ROOM    331   ANG MO KIO AV… 01 TO 03                 68
 7 2024-09 ANG MO KIO 3 ROOM    308A  ANG MO KIO AV… 16 TO 18                 70
 8 2024-09 ANG MO KIO 3 ROOM    321   ANG MO KIO AV… 07 TO 09                 88
 9 2024-09 ANG MO KIO 3 ROOM    308B  ANG MO KIO AV… 22 TO 24                 70
10 2024-09 ANG MO KIO 3 ROOM    225   ANG MO KIO AV… 01 TO 03                 67
# ℹ 11 more variables: flat_model &lt;chr&gt;, lease_commence_date &lt;dbl&gt;,
#   remaining_lease &lt;chr&gt;, resale_price &lt;dbl&gt;, address &lt;chr&gt;,
#   remaining_lease_yr &lt;int&gt;, remaining_lease_mth &lt;int&gt;, BLK_NO &lt;chr&gt;,
#   ROAD_NAME &lt;chr&gt;, POSTAL &lt;chr&gt;, geometry &lt;POINT [m]&gt;</code></pre>
            </div>
          </div>
        </section>
      </main>
      <!-- /main -->
      <script id="quarto-html-after-body" type="application/javascript">
        window.document.addEventListener("DOMContentLoaded", function (event) {
          const toggleBodyColorMode = (bsSheetEl) => {
            const mode = bsSheetEl.getAttribute("data-mode");
            const bodyEl = window.document.querySelector("body");
            if (mode === "dark") {
              bodyEl.classList.add("quarto-dark");
              bodyEl.classList.remove("quarto-light");
            } else {
              bodyEl.classList.add("quarto-light");
              bodyEl.classList.remove("quarto-dark");
            }
          };
          const toggleBodyColorPrimary = () => {
            const bsSheetEl = window.document.querySelector(
              "link#quarto-bootstrap"
            );
            if (bsSheetEl) {
              toggleBodyColorMode(bsSheetEl);
            }
          };
          toggleBodyColorPrimary();
          const disableStylesheet = (stylesheets) => {
            for (let i = 0; i < stylesheets.length; i++) {
              const stylesheet = stylesheets[i];
              stylesheet.rel = "prefetch";
            }
          };
          const enableStylesheet = (stylesheets) => {
            for (let i = 0; i < stylesheets.length; i++) {
              const stylesheet = stylesheets[i];
              stylesheet.rel = "stylesheet";
            }
          };
          const manageTransitions = (selector, allowTransitions) => {
            const els = window.document.querySelectorAll(selector);
            for (let i = 0; i < els.length; i++) {
              const el = els[i];
              if (allowTransitions) {
                el.classList.remove("notransition");
              } else {
                el.classList.add("notransition");
              }
            }
          };
          const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
            const baseTheme =
              document.querySelector("#giscus-base-theme")?.value ?? "light";
            const alternateTheme =
              document.querySelector("#giscus-alt-theme")?.value ?? "dark";
            let newTheme = "";
            if (darkModeDefault) {
              newTheme = isAlternate ? baseTheme : alternateTheme;
            } else {
              newTheme = isAlternate ? alternateTheme : baseTheme;
            }
            const changeGiscusTheme = () => {
              // From: https://github.com/giscus/giscus/issues/336
              const sendMessage = (message) => {
                const iframe = document.querySelector("iframe.giscus-frame");
                if (!iframe) return;
                iframe.contentWindow.postMessage(
                  { giscus: message },
                  "https://giscus.app"
                );
              };
              sendMessage({
                setConfig: {
                  theme: newTheme,
                },
              });
            };
            const isGiscussLoaded =
              window.document.querySelector("iframe.giscus-frame") !== null;
            if (isGiscussLoaded) {
              changeGiscusTheme();
            }
          };
          const toggleColorMode = (alternate) => {
            // Switch the stylesheets
            const alternateStylesheets = window.document.querySelectorAll(
              "link.quarto-color-scheme.quarto-color-alternate"
            );
            manageTransitions("#quarto-margin-sidebar .nav-link", false);
            if (alternate) {
              enableStylesheet(alternateStylesheets);
              for (const sheetNode of alternateStylesheets) {
                if (sheetNode.id === "quarto-bootstrap") {
                  toggleBodyColorMode(sheetNode);
                }
              }
            } else {
              disableStylesheet(alternateStylesheets);
              toggleBodyColorPrimary();
            }
            manageTransitions("#quarto-margin-sidebar .nav-link", true);
            // Switch the toggles
            const toggles = window.document.querySelectorAll(
              ".quarto-color-scheme-toggle"
            );
            for (let i = 0; i < toggles.length; i++) {
              const toggle = toggles[i];
              if (toggle) {
                if (alternate) {
                  toggle.classList.add("alternate");
                } else {
                  toggle.classList.remove("alternate");
                }
              }
            }
            // Hack to workaround the fact that safari doesn't
            // properly recolor the scrollbar when toggling (#1455)
            if (
              navigator.userAgent.indexOf("Safari") > 0 &&
              navigator.userAgent.indexOf("Chrome") == -1
            ) {
              manageTransitions("body", false);
              window.scrollTo(0, 1);
              setTimeout(() => {
                window.scrollTo(0, 0);
                manageTransitions("body", true);
              }, 40);
            }
          };
          const isFileUrl = () => {
            return window.location.protocol === "file:";
          };
          const hasAlternateSentinel = () => {
            let styleSentinel = getColorSchemeSentinel();
            if (styleSentinel !== null) {
              return styleSentinel === "alternate";
            } else {
              return false;
            }
          };
          const setStyleSentinel = (alternate) => {
            const value = alternate ? "alternate" : "default";
            if (!isFileUrl()) {
              window.localStorage.setItem("quarto-color-scheme", value);
            } else {
              localAlternateSentinel = value;
            }
          };
          const getColorSchemeSentinel = () => {
            if (!isFileUrl()) {
              const storageValue = window.localStorage.getItem(
                "quarto-color-scheme"
              );
              return storageValue != null
                ? storageValue
                : localAlternateSentinel;
            } else {
              return localAlternateSentinel;
            }
          };
          const darkModeDefault = true;
          let localAlternateSentinel = darkModeDefault
            ? "alternate"
            : "default";
          // Dark / light mode switch
          window.quartoToggleColorScheme = () => {
            // Read the current dark / light value
            let toAlternate = !hasAlternateSentinel();
            toggleColorMode(toAlternate);
            setStyleSentinel(toAlternate);
            toggleGiscusIfUsed(toAlternate, darkModeDefault);
          };
          // Ensure there is a toggle, if there isn't float one in the top right
          if (
            window.document.querySelector(".quarto-color-scheme-toggle") ===
            null
          ) {
            const a = window.document.createElement("a");
            a.classList.add("top-right");
            a.classList.add("quarto-color-scheme-toggle");
            a.href = "";
            a.onclick = function () {
              try {
                window.quartoToggleColorScheme();
              } catch {}
              return false;
            };
            const i = window.document.createElement("i");
            i.classList.add("bi");
            a.appendChild(i);
            window.document.body.appendChild(a);
          }
          // Switch to dark mode if need be
          if (hasAlternateSentinel()) {
            toggleColorMode(true);
          } else {
            toggleColorMode(false);
          }
          const icon = "";
          const anchorJS = new window.AnchorJS();
          anchorJS.options = {
            placement: "right",
            icon: icon,
          };
          anchorJS.add(".anchored");
          const isCodeAnnotation = (el) => {
            for (const clz of el.classList) {
              if (clz.startsWith("code-annotation-")) {
                return true;
              }
            }
            return false;
          };
          const onCopySuccess = function (e) {
            // button target
            const button = e.trigger;
            // don't keep focus
            button.blur();
            // flash "checked"
            button.classList.add("code-copy-button-checked");
            var currentTitle = button.getAttribute("title");
            button.setAttribute("title", "Copied!");
            let tooltip;
            if (window.bootstrap) {
              button.setAttribute("data-bs-toggle", "tooltip");
              button.setAttribute("data-bs-placement", "left");
              button.setAttribute("data-bs-title", "Copied!");
              tooltip = new bootstrap.Tooltip(button, {
                trigger: "manual",
                customClass: "code-copy-button-tooltip",
                offset: [0, -8],
              });
              tooltip.show();
            }
            setTimeout(function () {
              if (tooltip) {
                tooltip.hide();
                button.removeAttribute("data-bs-title");
                button.removeAttribute("data-bs-toggle");
                button.removeAttribute("data-bs-placement");
              }
              button.setAttribute("title", currentTitle);
              button.classList.remove("code-copy-button-checked");
            }, 1000);
            // clear code selection
            e.clearSelection();
          };
          const getTextToCopy = function (trigger) {
            const codeEl = trigger.previousElementSibling.cloneNode(true);
            for (const childEl of codeEl.children) {
              if (isCodeAnnotation(childEl)) {
                childEl.remove();
              }
            }
            return codeEl.innerText;
          };
          const clipboard = new window.ClipboardJS(
            ".code-copy-button:not([data-in-quarto-modal])",
            {
              text: getTextToCopy,
            }
          );
          clipboard.on("success", onCopySuccess);
          if (
            window.document.getElementById("quarto-embedded-source-code-modal")
          ) {
            // For code content inside modals, clipBoardJS needs to be initialized with a container option
            // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
            const clipboardModal = new window.ClipboardJS(
              ".code-copy-button[data-in-quarto-modal]",
              {
                text: getTextToCopy,
                container: window.document.getElementById(
                  "quarto-embedded-source-code-modal"
                ),
              }
            );
            clipboardModal.on("success", onCopySuccess);
          }
          var localhostRegex = new RegExp(
            /^(?:http|https):\/\/localhost\:?[0-9]*\//
          );
          var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp("https:\/\/isss626-gaa\.netlify\.app\/");
          var isInternal = (href) => {
            return (
              filterRegex.test(href) ||
              localhostRegex.test(href) ||
              mailtoRegex.test(href)
            );
          };
          // Inspect non-navigation links and adorn them if external
          var links = window.document.querySelectorAll(
            "a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)"
          );
          for (var i = 0; i < links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
            }
          }
          function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
            const config = {
              allowHTML: true,
              maxWidth: 500,
              delay: 100,
              arrow: false,
              appendTo: function (el) {
                return el.parentElement;
              },
              interactive: true,
              interactiveBorder: 10,
              theme: "quarto",
              placement: "bottom-start",
            };
            if (contentFn) {
              config.content = contentFn;
            }
            if (onTriggerFn) {
              config.onTrigger = onTriggerFn;
            }
            if (onUntriggerFn) {
              config.onUntrigger = onUntriggerFn;
            }
            window.tippy(el, config);
          }
          const noterefs = window.document.querySelectorAll(
            'a[role="doc-noteref"]'
          );
          for (var i = 0; i < noterefs.length; i++) {
            const ref = noterefs[i];
            tippyHover(ref, function () {
              // use id or data attribute instead here
              let href =
                ref.getAttribute("data-footnote-href") ||
                ref.getAttribute("href");
              try {
                href = new URL(href).hash;
              } catch {}
              const id = href.replace(/^#\/?/, "");
              const note = window.document.getElementById(id);
              if (note) {
                return note.innerHTML;
              } else {
                return "";
              }
            });
          }
          const xrefs = window.document.querySelectorAll("a.quarto-xref");
          const processXRef = (id, note) => {
            // Strip column container classes
            const stripColumnClz = (el) => {
              el.classList.remove("page-full", "page-columns");
              if (el.children) {
                for (const child of el.children) {
                  stripColumnClz(child);
                }
              }
            };
            stripColumnClz(note);
            if (id === null || id.startsWith("sec-")) {
              // Special case sections, only their first couple elements
              const container = document.createElement("div");
              if (note.children && note.children.length > 2) {
                container.appendChild(note.children[0].cloneNode(true));
                for (let i = 1; i < note.children.length; i++) {
                  const child = note.children[i];
                  if (child.tagName === "P" && child.innerText === "") {
                    continue;
                  } else {
                    container.appendChild(child.cloneNode(true));
                    break;
                  }
                }
                if (window.Quarto?.typesetMath) {
                  window.Quarto.typesetMath(container);
                }
                return container.innerHTML;
              } else {
                if (window.Quarto?.typesetMath) {
                  window.Quarto.typesetMath(note);
                }
                return note.innerHTML;
              }
            } else {
              // Remove any anchor links if they are present
              const anchorLink = note.querySelector("a.anchorjs-link");
              if (anchorLink) {
                anchorLink.remove();
              }
              if (window.Quarto?.typesetMath) {
                window.Quarto.typesetMath(note);
              }
              // TODO in 1.5, we should make sure this works without a callout special case
              if (note.classList.contains("callout")) {
                return note.outerHTML;
              } else {
                return note.innerHTML;
              }
            }
          };
          for (var i = 0; i < xrefs.length; i++) {
            const xref = xrefs[i];
            tippyHover(
              xref,
              undefined,
              function (instance) {
                instance.disable();
                let url = xref.getAttribute("href");
                let hash = undefined;
                if (url.startsWith("#")) {
                  hash = url;
                } else {
                  try {
                    hash = new URL(url).hash;
                  } catch {}
                }
                if (hash) {
                  const id = hash.replace(/^#\/?/, "");
                  const note = window.document.getElementById(id);
                  if (note !== null) {
                    try {
                      const html = processXRef(id, note.cloneNode(true));
                      instance.setContent(html);
                    } finally {
                      instance.enable();
                      instance.show();
                    }
                  } else {
                    // See if we can fetch this
                    fetch(url.split("#")[0])
                      .then((res) => res.text())
                      .then((html) => {
                        const parser = new DOMParser();
                        const htmlDoc = parser.parseFromString(
                          html,
                          "text/html"
                        );
                        const note = htmlDoc.getElementById(id);
                        if (note !== null) {
                          const html = processXRef(id, note);
                          instance.setContent(html);
                        }
                      })
                      .finally(() => {
                        instance.enable();
                        instance.show();
                      });
                  }
                } else {
                  // See if we can fetch a full url (with no hash to target)
                  // This is a special case and we should probably do some content thinning / targeting
                  fetch(url)
                    .then((res) => res.text())
                    .then((html) => {
                      const parser = new DOMParser();
                      const htmlDoc = parser.parseFromString(html, "text/html");
                      const note = htmlDoc.querySelector("main.content");
                      if (note !== null) {
                        // This should only happen for chapter cross references
                        // (since there is no id in the URL)
                        // remove the first header
                        if (
                          note.children.length > 0 &&
                          note.children[0].tagName === "HEADER"
                        ) {
                          note.children[0].remove();
                        }
                        const html = processXRef(null, note);
                        instance.setContent(html);
                      }
                    })
                    .finally(() => {
                      instance.enable();
                      instance.show();
                    });
                }
              },
              function (instance) {}
            );
          }
          let selectedAnnoteEl;
          const selectorForAnnotation = (cell, annotation) => {
            let cellAttr = 'data-code-cell="' + cell + '"';
            let lineAttr = 'data-code-annotation="' + annotation + '"';
            const selector = "span[" + cellAttr + "][" + lineAttr + "]";
            return selector;
          };
          const selectCodeLines = (annoteEl) => {
            const doc = window.document;
            const targetCell = annoteEl.getAttribute("data-target-cell");
            const targetAnnotation = annoteEl.getAttribute(
              "data-target-annotation"
            );
            const annoteSpan = window.document.querySelector(
              selectorForAnnotation(targetCell, targetAnnotation)
            );
            const lines = annoteSpan.getAttribute("data-code-lines").split(",");
            const lineIds = lines.map((line) => {
              return targetCell + "-" + line;
            });
            let top = null;
            let height = null;
            let parent = null;
            if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
              if (lineIds.length > 1) {
                const lastEl = window.document.getElementById(
                  lineIds[lineIds.length - 1]
                );
                const bottom = lastEl.offsetTop + lastEl.offsetHeight;
                height = bottom - top;
              }
              if (top !== null && height !== null && parent !== null) {
                // cook up a div (if necessary) and position it
                let div = window.document.getElementById(
                  "code-annotation-line-highlight"
                );
                if (div === null) {
                  div = window.document.createElement("div");
                  div.setAttribute("id", "code-annotation-line-highlight");
                  div.style.position = "absolute";
                  parent.appendChild(div);
                }
                div.style.top = top - 2 + "px";
                div.style.height = height + 4 + "px";
                div.style.left = 0;
                let gutterDiv = window.document.getElementById(
                  "code-annotation-line-highlight-gutter"
                );
                if (gutterDiv === null) {
                  gutterDiv = window.document.createElement("div");
                  gutterDiv.setAttribute(
                    "id",
                    "code-annotation-line-highlight-gutter"
                  );
                  gutterDiv.style.position = "absolute";
                  const codeCell = window.document.getElementById(targetCell);
                  const gutter = codeCell.querySelector(
                    ".code-annotation-gutter"
                  );
                  gutter.appendChild(gutterDiv);
                }
                gutterDiv.style.top = top - 2 + "px";
                gutterDiv.style.height = height + 4 + "px";
              }
              selectedAnnoteEl = annoteEl;
            }
          };
          const unselectCodeLines = () => {
            const elementsIds = [
              "code-annotation-line-highlight",
              "code-annotation-line-highlight-gutter",
            ];
            elementsIds.forEach((elId) => {
              const div = window.document.getElementById(elId);
              if (div) {
                div.remove();
              }
            });
            selectedAnnoteEl = undefined;
          };
          // Handle positioning of the toggle
          window.addEventListener(
            "resize",
            throttle(() => {
              elRect = undefined;
              if (selectedAnnoteEl) {
                selectCodeLines(selectedAnnoteEl);
              }
            }, 10)
          );
          function throttle(fn, ms) {
            let throttle = false;
            let timer;
            return (...args) => {
              if (!throttle) {
                // first call gets through
                fn.apply(this, args);
                throttle = true;
              } else {
                // all the others get throttled
                if (timer) clearTimeout(timer); // cancel #2
                timer = setTimeout(() => {
                  fn.apply(this, args);
                  timer = throttle = false;
                }, ms);
              }
            };
          }
          // Attach click handler to the DT
          const annoteDls = window.document.querySelectorAll(
            "dt[data-target-cell]"
          );
          for (const annoteDlNode of annoteDls) {
            annoteDlNode.addEventListener("click", (event) => {
              const clickedEl = event.target;
              if (clickedEl !== selectedAnnoteEl) {
                unselectCodeLines();
                const activeEl = window.document.querySelector(
                  "dt[data-target-cell].code-annotation-active"
                );
                if (activeEl) {
                  activeEl.classList.remove("code-annotation-active");
                }
                selectCodeLines(clickedEl);
                clickedEl.classList.add("code-annotation-active");
              } else {
                // Unselect the line
                unselectCodeLines();
                clickedEl.classList.remove("code-annotation-active");
              }
            });
          }
          const findCites = (el) => {
            const parentEl = el.parentElement;
            if (parentEl) {
              const cites = parentEl.dataset.cites;
              if (cites) {
                return {
                  el,
                  cites: cites.split(" "),
                };
              } else {
                return findCites(el.parentElement);
              }
            } else {
              return undefined;
            }
          };
          var bibliorefs = window.document.querySelectorAll(
            'a[role="doc-biblioref"]'
          );
          for (var i = 0; i < bibliorefs.length; i++) {
            const ref = bibliorefs[i];
            const citeInfo = findCites(ref);
            if (citeInfo) {
              tippyHover(citeInfo.el, function () {
                var popup = window.document.createElement("div");
                citeInfo.cites.forEach(function (cite) {
                  var citeDiv = window.document.createElement("div");
                  citeDiv.classList.add("hanging-indent");
                  citeDiv.classList.add("csl-entry");
                  var biblioDiv = window.document.getElementById("ref-" + cite);
                  if (biblioDiv) {
                    citeDiv.innerHTML = biblioDiv.innerHTML;
                  }
                  popup.appendChild(citeDiv);
                });
                return popup.innerHTML;
              });
            }
          }
        });
      </script>
    </div>
    <!-- /content -->
  </body>
</html>
